<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ineptR">
<title>Use cases • ineptR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.7/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.7/font.css" rel="stylesheet">
<link href="../deps/Ubuntu-0.4.7/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use cases">
<meta property="og:description" content="ineptR">
<meta property="og:image" content="https://c-matos.github.io/ineptR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ineptR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/use_cases.html">Use cases</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/c-matos/ineptR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Use cases</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/c-matos/ineptR/blob/HEAD/vignettes/articles/use_cases.Rmd" class="external-link"><code>vignettes/articles/use_cases.Rmd</code></a></small>
      <div class="d-none name"><code>use_cases.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://c-matos.github.io/ineptR/">ineptR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span></code></pre></div>
<p>The <a href="https://c-matos.github.io/ineptR/">main page</a> shows
how to use the function <code><a href="../reference/get_ine_data.html">get_ine_data()</a></code> to get the complete
dataset from a given indicator.<br>
However, some use cases may require only a subset of the available data.
To tackle such situations, the function <code><a href="../reference/get_ine_data.html">get_ine_data()</a></code>
accepts parameters where the user can specify the desired values for
each dimension.<br>
These parameters come in the form <em>“dimN”</em> (e.g. dim1, dim2, …),
up to the number of available dimensions for the selected indicator (use
<code><a href="../reference/get_dim_info.html">get_dim_info()</a></code> to see the available dimensions).</p>
<p>Some example use cases are provided below.</p>
<div class="section level2">
<h2 id="cross-sectional-analysis-only-a-subset-of-the-data">Cross-sectional analysis (Only a subset of the data)<a class="anchor" aria-label="anchor" href="#cross-sectional-analysis-only-a-subset-of-the-data"></a>
</h2>
<p>Suppose you want to analyse only the most recent population data. The
indicator “0008273” has population data. Let’s check what dimensions are
available and explore the indicator:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indicator</span> <span class="op">&lt;-</span> <span class="st">"0008273"</span> <span class="co">#Resident population (No.) by Place of residence (NUTS - 2013), Sex and Age group; Annual</span></span>
<span><span class="fu"><a href="../reference/get_dim_info.html">get_dim_info</a></span><span class="op">(</span><span class="va">indicator</span>, lang <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span> <span class="co"># Default lang is PT</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt;   dim_num abrv                             versao nota_dsg                      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1       Data reference period            XXXXX  <span style="color: #949494;">"</span>2021, Provisional Resident P…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2       Place of residence (NUTS - 2013) 03505  <span style="color: #949494;">"</span>Resident Population Estimate…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3       Sex                              00305   <span style="color: #BB0000;">NA</span>                           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4       Age group                        00708   <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>There are four available dimensions available for this indicator.</p>
<p>Dimension 1 is <strong>always</strong> the time dimension.<br>
Dimension 2 is <strong>always</strong> the place dimension.<br>
Other dimensions vary by indicator. In this case dimension 3 is
<em>Sex</em> and dimension 4 is <em>Age group</em>.</p>
<p>What is the most recent time period?</p>
<p><em>Alternative 1</em>: Using the <code><a href="../reference/get_metadata.html">get_metadata()</a></code>
function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indicator_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata.html">get_metadata</a></span><span class="op">(</span><span class="va">indicator</span>, lang <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span></span>
<span><span class="va">indicator_metadata</span></span>
<span><span class="co">#&gt; $IndicadorCod</span></span>
<span><span class="co">#&gt; [1] "0008273"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $IndicadorNome</span></span>
<span><span class="co">#&gt; [1] "Resident population (No.) by Place of residence (NUTS - 2013), Sex and Age group; Annual - Statistics Portugal, Annual estimates of resident population"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Periodic</span></span>
<span><span class="co">#&gt; [1] "Annual"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $PrimeiroPeriodo</span></span>
<span><span class="co">#&gt; [1] "2011"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $UltimoPeriodo</span></span>
<span><span class="co">#&gt; [1] "2022"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $UnidadeMedida</span></span>
<span><span class="co">#&gt; [1] "Number (No.)"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Potencia10</span></span>
<span><span class="co">#&gt; [1] "0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $PrecisaoDecimal</span></span>
<span><span class="co">#&gt; [1] "0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Lingua</span></span>
<span><span class="co">#&gt; [1] "EN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $DataUltimaAtualizacao</span></span>
<span><span class="co">#&gt; [1] "2023-06-15"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $DataExtracao</span></span>
<span><span class="co">#&gt; [1] "2023-09-07T08:06:52.144+01:00"</span></span>
<span></span>
<span><span class="va">most_recent_year</span> <span class="op">&lt;-</span> <span class="va">indicator_metadata</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="st">"UltimoPeriodo"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">most_recent_year</span></span>
<span><span class="co">#&gt; [1] 2022</span></span></code></pre></div>
<p>This function quickly shows the first and last time periods.<br>
However, it does not provide the id codes for each possible value, that
we will need further along in our analysis.</p>
<p><em>Alternative 2</em>: Using the <code><a href="../reference/get_dim_values.html">get_dim_values()</a></code>
function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Get a data frame with all the values for all dimensions</span></span>
<span><span class="va">dimension_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dim_values.html">get_dim_values</a></span><span class="op">(</span><span class="va">indicator</span>, lang <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#check the internal structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">dimension_values</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [378 × 7] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ dim_num    : chr [1:378] "1" "1" "1" "1" ...</span></span>
<span><span class="co">#&gt;  $ cat_id     : chr [1:378] "S7A2011" "S7A2012" "S7A2013" "S7A2014" ...</span></span>
<span><span class="co">#&gt;  $ categ_cod  : chr [1:378] "S7A2011" "S7A2012" "S7A2013" "S7A2014" ...</span></span>
<span><span class="co">#&gt;  $ categ_dsg  : chr [1:378] "2011" "2012" "2013" "2014" ...</span></span>
<span><span class="co">#&gt;  $ categ_ord  : chr [1:378] "20110101" "20120101" "20130101" "20140101" ...</span></span>
<span><span class="co">#&gt;  $ categ_nivel: chr [1:378] "1" "1" "1" "1" ...</span></span>
<span><span class="co">#&gt;  $ value_id   : chr [1:378] "Dim_Num1_S7A2011" "Dim_Num1_S7A2012" "Dim_Num1_S7A2013" "Dim_Num1_S7A2014" ...</span></span>
<span></span>
<span><span class="co">#Explore the values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dimension_values</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 7</span></span></span>
<span><span class="co">#&gt;   dim_num cat_id  categ_cod categ_dsg categ_ord categ_nivel value_id        </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1       S7A2011 S7A2011   2011      20110101  1           Dim_Num1_S7A2011</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1       S7A2012 S7A2012   2012      20120101  1           Dim_Num1_S7A2012</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1       S7A2013 S7A2013   2013      20130101  1           Dim_Num1_S7A2013</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1       S7A2014 S7A2014   2014      20140101  1           Dim_Num1_S7A2014</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 1       S7A2015 S7A2015   2015      20150101  1           Dim_Num1_S7A2015</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 1       S7A2016 S7A2016   2016      20160101  1           Dim_Num1_S7A2016</span></span>
<span></span>
<span><span class="va">most_recent_year</span> <span class="op">&lt;-</span> <span class="va">dimension_values</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">dim_num</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>categ_dsg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">categ_dsg</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The most recent value is 2022</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Exploring the other dimensions</span></span>
<span><span class="va">dimension_values</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="va">dim_num</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;list_of&lt;</span></span>
<span><span class="co">#&gt;   tbl_df&lt;</span></span>
<span><span class="co">#&gt;     dim_num    : character</span></span>
<span><span class="co">#&gt;     cat_id     : character</span></span>
<span><span class="co">#&gt;     categ_cod  : character</span></span>
<span><span class="co">#&gt;     categ_dsg  : character</span></span>
<span><span class="co">#&gt;     categ_ord  : character</span></span>
<span><span class="co">#&gt;     categ_nivel: character</span></span>
<span><span class="co">#&gt;     value_id   : character</span></span>
<span><span class="co">#&gt;   &gt;</span></span>
<span><span class="co">#&gt; &gt;[4]&gt;</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 7</span></span></span>
<span><span class="co">#&gt;    dim_num cat_id  categ_cod categ_dsg categ_ord categ_nivel value_id        </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1       S7A2011 S7A2011   2011      20110101  1           Dim_Num1_S7A2011</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1       S7A2012 S7A2012   2012      20120101  1           Dim_Num1_S7A2012</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1       S7A2013 S7A2013   2013      20130101  1           Dim_Num1_S7A2013</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1       S7A2014 S7A2014   2014      20140101  1           Dim_Num1_S7A2014</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1       S7A2015 S7A2015   2015      20150101  1           Dim_Num1_S7A2015</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1       S7A2016 S7A2016   2016      20160101  1           Dim_Num1_S7A2016</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1       S7A2017 S7A2017   2017      20170101  1           Dim_Num1_S7A2017</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1       S7A2018 S7A2018   2018      20180101  1           Dim_Num1_S7A2018</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1       S7A2019 S7A2019   2019      20190101  1           Dim_Num1_S7A2019</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1       S7A2020 S7A2020   2020      20200101  1           Dim_Num1_S7A2020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 1       S7A2021 S7A2021   2021      20210101  1           Dim_Num1_S7A2021</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 1       S7A2022 S7A2022   2022      20220101  1           Dim_Num1_S7A2022</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 344 × 7</span></span></span>
<span><span class="co">#&gt;    dim_num cat_id  categ_cod categ_dsg         categ_ord categ_nivel value_id   </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2       PT      PT        Portugal          1         1           Dim_Num2_PT</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2       1       1         Continente        2         2           Dim_Num2_1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2       11      11        Norte             3         3           Dim_Num2_11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2       111     111       Alto Minho        4         4           Dim_Num2_1…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2       1111601 1111601   Arcos de Valdevez 5         5           Dim_Num2_1…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2       1111602 1111602   Caminha           42        5           Dim_Num2_1…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2       1111603 1111603   Melgaço           57        5           Dim_Num2_1…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2       1111604 1111604   Monção            71        5           Dim_Num2_1…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2       1111605 1111605   Paredes de Coura  96        5           Dim_Num2_1…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2       1111606 1111606   Ponte da Barca    113       5           Dim_Num2_1…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 334 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 7</span></span></span>
<span><span class="co">#&gt;   dim_num cat_id categ_cod categ_dsg categ_ord categ_nivel value_id  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 3       T      T         MF        1         1           Dim_Num3_T</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 3       1      1         M         2         2           Dim_Num3_1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3       2      2         F         3         2           Dim_Num3_2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 19 × 7</span></span></span>
<span><span class="co">#&gt;    dim_num cat_id categ_cod categ_dsg         categ_ord categ_nivel value_id   </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 4       T      T         Total             10        1           Dim_Num4_T </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 4       11     11        0 - 4 years       20        2           Dim_Num4_11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 4       12     12        5 - 9 years       80        2           Dim_Num4_12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4       21     21        10 - 14 years     140       2           Dim_Num4_21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 4       22     22        15 - 19 years     200       2           Dim_Num4_22</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 4       31     31        20 - 24 years     260       2           Dim_Num4_31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 4       32     32        25 - 29 years     320       2           Dim_Num4_32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 4       41     41        30 - 34 years     380       2           Dim_Num4_41</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 4       42     42        35 - 39 years     440       2           Dim_Num4_42</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 4       51     51        40 - 44 years     500       2           Dim_Num4_51</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 4       52     52        45 - 49 years     560       2           Dim_Num4_52</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 4       61     61        50 - 54 years     620       2           Dim_Num4_61</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 4       62     62        55 - 59 years     680       2           Dim_Num4_62</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 4       71     71        60 - 64 years     740       2           Dim_Num4_71</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 4       72     72        65 - 69 years     800       2           Dim_Num4_72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 4       81     81        70 - 74 years     860       2           Dim_Num4_81</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 4       82     82        75 - 79 years     920       2           Dim_Num4_82</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> 4       91     91        80 - 84 years     980       2           Dim_Num4_91</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> 4       92     92        85 and more years 1040      2           Dim_Num4_92</span></span></code></pre></div>
<p>The advantage of this approach is that it shows the
<em>categ_cod</em> variable, that we can pass to the <em>dimN</em>
parameters of the <code><a href="../reference/get_ine_data.html">get_ine_data()</a></code> function to obtain only a
subset of the available data.</p>
<p>We see 344 geographic units, including NUTS 1, NUTS 2, NUTS 3 and
municipalities as the most disaggregated level. MF, M and F sexes are
available. Five year age groups are available.</p>
<p>Now suppose we want to compare population size across NUTS 3, for all
available sexes and age groups. (Note that all NUTS 3 have a 3-character
<em>categ_cod</em>).<br>
The <code><a href="../reference/get_ine_data.html">get_ine_data()</a></code> function conveniently allows us to only
request the desired data:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Get the id of the latest time period</span></span>
<span><span class="va">latest_year_id</span> <span class="op">&lt;-</span> <span class="va">dimension_values</span><span class="op">$</span><span class="va">categ_cod</span><span class="op">[</span><span class="va">dimension_values</span><span class="op">$</span><span class="va">categ_dsg</span> <span class="op">==</span> <span class="va">most_recent_year</span><span class="op">]</span></span>
<span></span>
<span><span class="va">latest_year_id</span></span>
<span><span class="co">#&gt; [1] "S7A2022"</span></span>
<span></span>
<span><span class="co">#Get the id of all NUTS 3</span></span>
<span><span class="va">nuts3_id</span> <span class="op">&lt;-</span> <span class="va">dimension_values</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html" class="external-link">str_length</a></span><span class="op">(</span><span class="va">categ_cod</span><span class="op">)</span><span class="op">==</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co">#NUTS 3 have a 3-character code</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">categ_cod</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nuts3_id</span></span>
<span><span class="co">#&gt;  [1] "111" "112" "119" "11A" "11B" "11C" "11D" "11E" "16B" "16D" "16E" "16F"</span></span>
<span><span class="co">#&gt; [13] "16G" "16H" "16I" "16J" "170" "181" "184" "185" "186" "187" "150" "200"</span></span>
<span><span class="co">#&gt; [25] "300"</span></span>
<span></span>
<span><span class="co">#Get the data</span></span>
<span><span class="va">indicator_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ine_data.html">get_ine_data</a></span><span class="op">(</span><span class="va">indicator</span>, </span>
<span>                                 lang <span class="op">=</span> <span class="st">"EN"</span>, </span>
<span>                                 dim1 <span class="op">=</span> <span class="va">latest_year_id</span>, </span>
<span>                                 dim2 <span class="op">=</span> <span class="va">nuts3_id</span><span class="op">)</span></span></code></pre></div>
<p><span style="color: darkred;">Important:</span><br>
The parameters passed to <code><a href="../reference/get_ine_data.html">get_ine_data()</a></code> are a subset from
the <strong>categ_cod</strong> values that we obtained with the
<code>:get_dim_values()</code>.<br>
In this example we passed a subset of values only to dim1 and dim2,
however we can use this approach to any combination of the available
dimensions.</p>
</div>
<div class="section level2">
<h2 id="example-with-a-large-and-cumbersome-dataset">Example with a large and cumbersome dataset<a class="anchor" aria-label="anchor" href="#example-with-a-large-and-cumbersome-dataset"></a>
</h2>
<p>The indicator <em>Deaths (No.) by Place of residence (NUTS - 2013),
Sex, Age group and Death cause (European short-list); Annual (6)</em>,
with ID “0008206” is a very large dataset:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indicator</span> <span class="op">&lt;-</span> <span class="st">"0008206"</span></span>
<span><span class="fu"><a href="../reference/get_dim_info.html">get_dim_info</a></span><span class="op">(</span><span class="va">indicator</span>, lang <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   dim_num abrv                              versao nota_dsg                     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1       Data reference period             XXXXX  <span style="color: #949494;">"</span>International Classificatio…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2       Place of residence (NUTS - 2013)  03513  <span style="color: #949494;">"</span>From January 1st, 2015 came…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3       Sex                               00305  <span style="color: #949494;">"</span>The total number of deaths …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4       Age group (decennial)             03633  <span style="color: #949494;">"</span>In some situations of previ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5       Death cause (European short-list) 00204  <span style="color: #949494;">"</span>The \"European short-list f…</span></span>
<span></span>
<span><span class="co">#Check number of unique values by dimension</span></span>
<span><span class="va">unique_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dim_values.html">get_dim_values</a></span><span class="op">(</span><span class="va">indicator</span>, lang <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">dim_num</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>unique_values <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">unique_values</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   dim_num unique_values</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1                  31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2                 354</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3                   3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4                  21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5                  66</span></span></code></pre></div>
<p>With the limit of 40k records per API call, extracting all values
would result in over 1142 API calls in the best case scenario. This
would take many hours and might result in out of memory errors or API
timeout. In such situations the recommended approach is to iterate over
one of the dimensions (e.g. Time dimension), and store the data obtained
at each iteration.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Carlos Matos.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
